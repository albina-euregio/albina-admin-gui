<div>
  <div class="region-form__mobile-header" [class.d-none]="isVariantsSidebarVisible()">
    <h1 class="font-m-bold">
      {{ dangerSourcesService.getActiveDate()[1] | date: "EEEE," : undefined : translateService.currentLang }}
      {{ dangerSourcesService.getActiveDate()[1] | date: "longDate" : undefined : translateService.currentLang }}
    </h1>
  </div>

  <header class="region-form__header">
    <div class="region-form__header-actions btn-group" dropdown>
      <button (click)="deselectVariant()" class="btn btn-bare btn-sm btn-icon btn-bare--grey">
        <i class="ph-bold ph-x"></i>
      </button>
    </div>
    <div class="region-form__title">
      <h6 class="font-xs text-secondary">{{ variant().dangerSource?.title }}</h6>
      <h2 class="font-l">
        <span *ngIf="variant().regions.length > 0">{{
          regionsService.getRegionName(variant().regions[0].toString())
        }}</span>
        <span *ngIf="variant().regions.length > 1"> + {{ variant().regions.length - 1 }} </span>
      </h2>
      <div class="user-avatar__name">
        Updated on {{ variant().updateDate | date: "dd.MM.yyyy HH:mm" : undefined : translateService.currentLang }}
      </div>
    </div>
  </header>

  <div class="form-group region-form__mindset">
    <p class="region-form__mindset-text">
      {{ "dangerSources.create.variantStatus" | translate }}
    </p>
    <select
      [ngModel]="variant().dangerSourceVariantStatus"
      (ngModelChange)="onVariantStatusChange($event)"
      [disabled]="disabled()"
      class="form-select"
    >
      <option selected></option>
      <option *ngFor="let status of variantStatus" [value]="status">
        {{ "dangerSources.variantStatus." + status | translate }}
      </option>
    </select>
  </div>

  <div
    *ngIf="dangerSourcesService.getIsEditable() && isCreator(variant())"
    class="region-form__banner banner banner-info"
  >
    <p class="banner__text">
      <i class="ph ph-pencil-line"></i>
      {{ "dangerSources.create.variantEditable" | translate }}
    </p>
    <div class="btn-group banner__actions">
      <button
        *ngIf="!editRegions"
        (click)="editMicroRegions()"
        data-toggle="tooltip"
        title="{{ 'dangerSources.create.tooltip.edit' | translate }}"
        type="button"
        class="btn btn-sm btn-icon btn-outline-primary"
      >
        <i class="ph ph-map-trifold"></i>
      </button>
      <button
        *ngIf="!editRegions && !authenticationService.isCurrentUserInRole(constantsService.roleObserver)"
        (click)="copyVariant()"
        data-toggle="tooltip"
        title="{{ 'dangerSources.create.tooltip.copy' | translate }}"
        type="button"
        class="btn btn-sm btn-icon btn-outline-primary"
      >
        <i class="ph ph-copy"></i>
      </button>
      <button
        *ngIf="!editRegions"
        (click)="deleteVariant()"
        data-toggle="tooltip"
        title="{{ 'dangerSources.create.tooltip.delete' | translate }}"
        type="button"
        class="btn btn-sm btn-icon btn-outline-primary"
      >
        <i class="ph ph-trash"></i>
      </button>
    </div>
  </div>

  <div
    *ngIf="!dangerSourcesService.getIsEditable() || (dangerSourcesService.getIsEditable() && !isCreator(variant()))"
    class="region-form__banner banner banner-warning"
  >
    <p class="banner__text">
      <i class="ph ph-pencil-slash"></i>
      {{ "dangerSources.create.variantNotEditable" | translate }}
    </p>
    <div class="btn-group banner__actions">
      <button
        *ngIf="showEditMicroRegionsButton()"
        (click)="editMicroRegions()"
        data-toggle="tooltip"
        title="{{ 'dangerSources.create.tooltip.edit' | translate }}"
        type="button"
        class="btn btn-sm btn-icon btn-outline-primary"
      >
        <i class="ph ph-map-trifold"></i>
      </button>
      <button
        *ngIf="!isComparedVariant() && !authenticationService.isCurrentUserInRole(constantsService.roleObserver)"
        (click)="copyVariant()"
        data-toggle="tooltip"
        title="{{ 'dangerSources.create.tooltip.copy' | translate }}"
        type="button"
        class="btn btn-sm btn-icon btn-outline-primary"
      >
        <i class="ph ph-copy"></i>
      </button>
    </div>
  </div>

  <main class="region-form__content">
    <accordion class="accordion">
      <!-- Avalanche -->
      <accordion-group
        class="accordion-group"
        [isOpen]="isAccordionAvalancheOpen"
        (isOpenChange)="accordionChanged($event, 'avalanche')"
      >
        <div accordion-heading class="accordion-header accordion-header--with-buttons">
          <h2 class="accordion-header__title">
            <i *ngIf="!isAccordionAvalancheOpen" class="accordion__arrow ph ph-caret-right"></i>
            <i *ngIf="isAccordionAvalancheOpen" class="accordion__arrow ph ph-caret-down"></i>
            {{ "dangerSources.create.title.avalanche" | translate }}
          </h2>
        </div>
        <div class="form-group row">
          <label class="form-label" for="">{{ "avalancheType.title" | translate }}</label>
          <div class="btn-group">
            <!-- SLAB -->
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isAvalancheType(avalancheTypeEnum.slab) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setAvalancheType($event, isAvalancheType(avalancheTypeEnum.slab) ? undefined : avalancheTypeEnum.slab)
              "
              data-toggle="tooltip"
              title="{{ 'avalancheType.tooltip.slab' | translate }}"
            >
              <span>{{ "avalancheType.label.slab" | translate }}</span>
            </button>

            <!-- LOOSE -->
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isAvalancheType(avalancheTypeEnum.loose) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setAvalancheType($event, isAvalancheType(avalancheTypeEnum.loose) ? undefined : avalancheTypeEnum.loose)
              "
              data-toggle="tooltip"
              title="{{ 'avalancheType.tooltip.loose' | translate }}"
            >
              <span>{{ "avalancheType.label.loose" | translate }}</span>
            </button>

            <!-- GLIDE -->
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isAvalancheType(avalancheTypeEnum.glide) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setAvalancheType($event, isAvalancheType(avalancheTypeEnum.glide) ? undefined : avalancheTypeEnum.glide)
              "
              data-toggle="tooltip"
              title="{{ 'avalancheType.tooltip.glide' | translate }}"
            >
              <span>{{ "avalancheType.label.glide" | translate }}</span>
            </button>
          </div>
        </div>

        <hr class="solid" />

        <!-- GLIDE SNOW AVALANCHES -->
        <app-slider
          *ngIf="isAvalancheType(avalancheTypeEnum.glide)"
          [label]="translateService.instant('dangerSources.create.label.glidingSnowActivity')"
          [disabled]="disabled()"
          [sliderValue]="variant().glidingSnowActivityValue"
          (sliderValueChange)="glidingSnowActivityOptions.onValueChange($event)"
          [sliderOptions]="glidingSnowActivityOptions"
        />

        <div *ngIf="isAvalancheType(avalancheTypeEnum.glide)" class="form-group row">
          <label class="form-label me-3" for="textarea-input">{{
            "dangerSources.create.label.snowHeight" | translate
          }}</label>
          <div class="input-group align-items-baseline">
            <input
              step="1"
              min="0"
              id="inputSnowHeightLowerLimit"
              class="form-control"
              size="14"
              type="number"
              name="snow-height-lower-limit-input"
              [disabled]="disabled()"
              [(ngModel)]="variant().snowHeightLowerLimit"
              (change)="updateVariantOnServer()"
            />
            <span class="input-group-text">cm</span>
            <label class="form-label mx-3" for="snowHeightLabel"> - </label>
            <input
              step="1"
              min="0"
              id="inputSnowHeightUpperLimit"
              class="form-control"
              size="14"
              type="number"
              name="snow-height-upper-limit-input"
              [disabled]="disabled()"
              [(ngModel)]="variant().snowHeightUpperLimit"
              (change)="updateVariantOnServer()"
            />
            <span class="input-group-text">cm</span>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.glide)" class="form-group row">
          <label class="form-label me-3" for="textarea-input">{{
            "dangerSources.create.label.snowHeightAverage" | translate
          }}</label>
          <div class="input-group align-items-baseline">
            <input
              step="1"
              min="0"
              id="inputSnowHeightAverage"
              class="form-control"
              size="14"
              type="number"
              name="snow-height-average-input"
              [disabled]="disabled()"
              [(ngModel)]="variant().snowHeightAverage"
              (change)="updateVariantOnServer()"
            />
            <span class="input-group-text">cm</span>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.glide)" class="form-group row">
          <label class="form-label" for="zeroDegreeIsothermCheckbox">{{
            "dangerSources.create.label.zeroDegreeIsotherm" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().zeroDegreeIsotherm !== undefined && variant().zeroDegreeIsotherm === true
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setZeroDegreeIsotherm(true)"
            >
              <span>{{ "button.yes" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().zeroDegreeIsotherm !== undefined && variant().zeroDegreeIsotherm === false
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setZeroDegreeIsotherm(false)"
            >
              <span>{{ "button.no" | translate }}</span>
            </button>
          </div>
        </div>

        <!-- SLAB AVALANCHES -->
        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.slabGrainShape" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabGrainShape(grainShapeEnum.PP) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setSlabGrainShape($event, isSlabGrainShape(grainShapeEnum.PP) ? undefined : grainShapeEnum.PP)"
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.PP.class')"
            >
              <span>{{ "grainShape.PP.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabGrainShape(grainShapeEnum.DF) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setSlabGrainShape($event, isSlabGrainShape(grainShapeEnum.DF) ? undefined : grainShapeEnum.DF)"
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.DF.class')"
            >
              <span>{{ "grainShape.DF.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabGrainShape(grainShapeEnum.RG) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setSlabGrainShape($event, isSlabGrainShape(grainShapeEnum.RG) ? undefined : grainShapeEnum.RG)"
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.RG.class')"
            >
              <span>{{ "grainShape.RG.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabGrainShape(grainShapeEnum.FC) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setSlabGrainShape($event, isSlabGrainShape(grainShapeEnum.FC) ? undefined : grainShapeEnum.FC)"
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.FC.class')"
            >
              <span>{{ "grainShape.FC.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabGrainShape(grainShapeEnum.MF) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setSlabGrainShape($event, isSlabGrainShape(grainShapeEnum.MF) ? undefined : grainShapeEnum.MF)"
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.MF.class')"
            >
              <span>{{ "grainShape.MF.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabGrainShape(grainShapeEnum.IF) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setSlabGrainShape($event, isSlabGrainShape(grainShapeEnum.IF) ? undefined : grainShapeEnum.IF)"
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.IF.class')"
            >
              <span>{{ "grainShape.IF.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabGrainShape(grainShapeEnum.MFcr) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setSlabGrainShape($event, isSlabGrainShape(grainShapeEnum.MFcr) ? undefined : grainShapeEnum.MFcr)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.MFcr.class')"
            >
              <span>{{ "grainShape.MFcr.code" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label pe-3" for="textarea-input">{{
            "dangerSources.create.label.slabThickness" | translate
          }}</label>
          <div class="input-group align-items-baseline">
            <input
              step="5"
              min="0"
              id="inputSlabThicknessLowerLimit"
              class="form-control"
              size="14"
              type="number"
              name="slab-thickness-lower-limit-input"
              [disabled]="disabled()"
              [(ngModel)]="variant().slabThicknessLowerLimit"
              (change)="updateVariantOnServer()"
            />
            <span class="input-group-text">cm</span>
            <label class="form-label mx-3" for="slabThicknessLabel"> - </label>
            <input
              step="5"
              min="0"
              id="inputSlabThicknessUpperLimit"
              class="form-control"
              size="14"
              type="number"
              name="slab-thickness-upper-limit-input"
              [disabled]="disabled()"
              [(ngModel)]="variant().slabThicknessUpperLimit"
              (change)="updateVariantOnServer()"
            />
            <span class="input-group-text">cm</span>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label pe-3" for="textarea-input">{{
            "dangerSources.create.label.slabHandHardness" | translate
          }}</label>
          <div class="input-group align-items-baseline">
            <div class="btn-group flex-fill">
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessLowerLimit(handHardnessEnum.fist) ? 'btn-secondary' : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessLowerLimit(
                    $event,
                    isSlabHandHardnessLowerLimit(handHardnessEnum.fist) ? undefined : handHardnessEnum.fist
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.fist' | translate }}"
              >
                <span>{{ "handHardness.fist" | translate }}</span>
              </button>
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessLowerLimit(handHardnessEnum.four_fingers)
                    ? 'btn-secondary'
                    : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessLowerLimit(
                    $event,
                    isSlabHandHardnessLowerLimit(handHardnessEnum.four_fingers)
                      ? undefined
                      : handHardnessEnum.four_fingers
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.four_fingers' | translate }}"
              >
                <span>{{ "handHardness.four_fingers" | translate }}</span>
              </button>
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessLowerLimit(handHardnessEnum.one_finger) ? 'btn-secondary' : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessLowerLimit(
                    $event,
                    isSlabHandHardnessLowerLimit(handHardnessEnum.one_finger) ? undefined : handHardnessEnum.one_finger
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.one_finger' | translate }}"
              >
                <span>{{ "handHardness.one_finger" | translate }}</span>
              </button>
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessLowerLimit(handHardnessEnum.pencil) ? 'btn-secondary' : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessLowerLimit(
                    $event,
                    isSlabHandHardnessLowerLimit(handHardnessEnum.pencil) ? undefined : handHardnessEnum.pencil
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.pencil' | translate }}"
              >
                <span>{{ "handHardness.pencil" | translate }}</span>
              </button>
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessLowerLimit(handHardnessEnum.knife) ? 'btn-secondary' : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessLowerLimit(
                    $event,
                    isSlabHandHardnessLowerLimit(handHardnessEnum.knife) ? undefined : handHardnessEnum.knife
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.knife' | translate }}"
              >
                <span>{{ "handHardness.knife" | translate }}</span>
              </button>
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessLowerLimit(handHardnessEnum.ice) ? 'btn-secondary' : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessLowerLimit(
                    $event,
                    isSlabHandHardnessLowerLimit(handHardnessEnum.ice) ? undefined : handHardnessEnum.ice
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.ice' | translate }}"
              >
                <span>{{ "handHardness.ice" | translate }}</span>
              </button>
            </div>
            <label class="form-label mx-3" for="slabHandHardnessLabel"> - </label>
            <div class="btn-group flex-fill">
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessUpperLimit(handHardnessEnum.fist) ? 'btn-secondary' : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessUpperLimit(
                    $event,
                    isSlabHandHardnessUpperLimit(handHardnessEnum.fist) ? undefined : handHardnessEnum.fist
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.fist' | translate }}"
              >
                <span>{{ "handHardness.fist" | translate }}</span>
              </button>
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessUpperLimit(handHardnessEnum.four_fingers)
                    ? 'btn-secondary'
                    : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessUpperLimit(
                    $event,
                    isSlabHandHardnessUpperLimit(handHardnessEnum.four_fingers)
                      ? undefined
                      : handHardnessEnum.four_fingers
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.four_fingers' | translate }}"
              >
                <span>{{ "handHardness.four_fingers" | translate }}</span>
              </button>
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessUpperLimit(handHardnessEnum.one_finger) ? 'btn-secondary' : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessUpperLimit(
                    $event,
                    isSlabHandHardnessUpperLimit(handHardnessEnum.one_finger) ? undefined : handHardnessEnum.one_finger
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.one_finger' | translate }}"
              >
                <span>{{ "handHardness.one_finger" | translate }}</span>
              </button>
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessUpperLimit(handHardnessEnum.pencil) ? 'btn-secondary' : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessUpperLimit(
                    $event,
                    isSlabHandHardnessUpperLimit(handHardnessEnum.pencil) ? undefined : handHardnessEnum.pencil
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.pencil' | translate }}"
              >
                <span>{{ "handHardness.pencil" | translate }}</span>
              </button>
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessUpperLimit(handHardnessEnum.knife) ? 'btn-secondary' : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessUpperLimit(
                    $event,
                    isSlabHandHardnessUpperLimit(handHardnessEnum.knife) ? undefined : handHardnessEnum.knife
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.knife' | translate }}"
              >
                <span>{{ "handHardness.knife" | translate }}</span>
              </button>
              <button
                type="reset"
                class="btn btn-sm"
                [disabled]="disabled()"
                [ngClass]="
                  isSlabHandHardnessUpperLimit(handHardnessEnum.ice) ? 'btn-secondary' : 'btn-outline-secondary'
                "
                (click)="
                  setSlabHandHardnessUpperLimit(
                    $event,
                    isSlabHandHardnessUpperLimit(handHardnessEnum.ice) ? undefined : handHardnessEnum.ice
                  )
                "
                data-toggle="tooltip"
                title="{{ 'handHardness.ice' | translate }}"
              >
                <span>{{ "handHardness.ice" | translate }}</span>
              </button>
            </div>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.slabHardnessProfile" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabHardnessProfile(tendencyEnum.increasing) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setSlabHardnessProfile(
                  $event,
                  isSlabHardnessProfile(tendencyEnum.increasing) ? undefined : tendencyEnum.increasing
                )
              "
              data-toggle="tooltip"
              title="{{ 'hardnessTendency.increasing' | translate }}"
            >
              <span>{{ "hardnessTendency.increasing" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabHardnessProfile(tendencyEnum.steady) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setSlabHardnessProfile(
                  $event,
                  isSlabHardnessProfile(tendencyEnum.steady) ? undefined : tendencyEnum.steady
                )
              "
              data-toggle="tooltip"
              title="{{ 'hardnessTendency.steady' | translate }}"
            >
              <span>{{ "hardnessTendency.steady" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabHardnessProfile(tendencyEnum.decreasing) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setSlabHardnessProfile(
                  $event,
                  isSlabHardnessProfile(tendencyEnum.decreasing) ? undefined : tendencyEnum.decreasing
                )
              "
              data-toggle="tooltip"
              title="{{ 'hardnessTendency.decreasing' | translate }}"
            >
              <span>{{ "hardnessTendency.decreasing" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.slabEnergyTransferPotential" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isSlabEnergyTransferPotential(characteristicEnum.low) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="
                setSlabEnergyTransferPotential(
                  $event,
                  isSlabEnergyTransferPotential(characteristicEnum.low) ? undefined : characteristicEnum.low
                )
              "
              data-toggle="tooltip"
              title="{{ 'characteristic.low' | translate }}"
            >
              <span>{{ "characteristic.low" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isSlabEnergyTransferPotential(characteristicEnum.medium) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="
                setSlabEnergyTransferPotential(
                  $event,
                  isSlabEnergyTransferPotential(characteristicEnum.medium) ? undefined : characteristicEnum.medium
                )
              "
              data-toggle="tooltip"
              title="{{ 'characteristic.medium' | translate }}"
            >
              <span>{{ "characteristic.medium" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isSlabEnergyTransferPotential(characteristicEnum.high) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="
                setSlabEnergyTransferPotential(
                  $event,
                  isSlabEnergyTransferPotential(characteristicEnum.high) ? undefined : characteristicEnum.high
                )
              "
              data-toggle="tooltip"
              title="{{ 'characteristic.high' | translate }}"
            >
              <span>{{ "characteristic.high" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isSlabEnergyTransferPotential(characteristicEnum.very_high) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="
                setSlabEnergyTransferPotential(
                  $event,
                  isSlabEnergyTransferPotential(characteristicEnum.very_high) ? undefined : characteristicEnum.very_high
                )
              "
              data-toggle="tooltip"
              title="{{ 'characteristic.very_high' | translate }}"
            >
              <span>{{ "characteristic.very_high" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.slabDistribution" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabDistribution(distributionEnum.isolated) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setSlabDistribution(
                  $event,
                  isSlabDistribution(distributionEnum.isolated) ? undefined : distributionEnum.isolated
                )
              "
              data-toggle="tooltip"
              title="{{ 'distribution.isolated' | translate }}"
            >
              <span>{{ "distribution.isolated" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabDistribution(distributionEnum.specific) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setSlabDistribution(
                  $event,
                  isSlabDistribution(distributionEnum.specific) ? undefined : distributionEnum.specific
                )
              "
              data-toggle="tooltip"
              title="{{ 'distribution.specific' | translate }}"
            >
              <span>{{ "distribution.specific" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlabDistribution(distributionEnum.widespread) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setSlabDistribution(
                  $event,
                  isSlabDistribution(distributionEnum.widespread) ? undefined : distributionEnum.widespread
                )
              "
              data-toggle="tooltip"
              title="{{ 'distribution.widespread' | translate }}"
            >
              <span>{{ "distribution.widespread" | translate }}</span>
            </button>
          </div>
        </div>

        <hr *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="solid" />

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.weakLayerGrainShape" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerGrainShape(grainShapeEnum.PP) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerGrainShape($event, isWeakLayerGrainShape(grainShapeEnum.PP) ? undefined : grainShapeEnum.PP)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.PP.class')"
            >
              <span>{{ "grainShape.PP.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerGrainShape(grainShapeEnum.DF) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerGrainShape($event, isWeakLayerGrainShape(grainShapeEnum.DF) ? undefined : grainShapeEnum.DF)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.DF.class')"
            >
              <span>{{ "grainShape.DF.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerGrainShape(grainShapeEnum.RG) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerGrainShape($event, isWeakLayerGrainShape(grainShapeEnum.RG) ? undefined : grainShapeEnum.RG)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.RG.class')"
            >
              <span>{{ "grainShape.RG.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerGrainShape(grainShapeEnum.FC) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerGrainShape($event, isWeakLayerGrainShape(grainShapeEnum.FC) ? undefined : grainShapeEnum.FC)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.FC.class')"
            >
              <span>{{ "grainShape.FC.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerGrainShape(grainShapeEnum.DH) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerGrainShape($event, isWeakLayerGrainShape(grainShapeEnum.DH) ? undefined : grainShapeEnum.DH)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.DH.class')"
            >
              <span>{{ "grainShape.DH.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerGrainShape(grainShapeEnum.SH) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerGrainShape($event, isWeakLayerGrainShape(grainShapeEnum.SH) ? undefined : grainShapeEnum.SH)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.SH.class')"
            >
              <span>{{ "grainShape.SH.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerGrainShape(grainShapeEnum.PPgp) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerGrainShape(
                  $event,
                  isWeakLayerGrainShape(grainShapeEnum.PPgp) ? undefined : grainShapeEnum.PPgp
                )
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.PPgp.class')"
            >
              <span>{{ "grainShape.PPgp.code" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label pe-3" for="textarea-input">{{
            "dangerSources.create.label.weakLayerGrainSize" | translate
          }}</label>
          <div class="input-group align-items-baseline">
            <input
              step="0.25"
              min="0"
              id="inputWeakLayerGrainSizeLowerLimit"
              class="form-control"
              size="14"
              type="number"
              name="weak-layer-grain-size-lower-limit-input"
              [disabled]="disabled()"
              [(ngModel)]="variant().weakLayerGrainSizeLowerLimit"
              (change)="updateVariantOnServer()"
            />
            <span class="input-group-text">mm</span>
            <label class="form-label mx-3" for="weakLayerGrainSizeLabel"> - </label>
            <input
              step="0.25"
              min="0"
              id="inputWeakLayerGrainSizeUpperLimit"
              class="form-control"
              size="14"
              type="number"
              name="weak-layer-grain-size-upper-limit-input"
              [disabled]="disabled()"
              [(ngModel)]="variant().weakLayerGrainSizeUpperLimit"
              (change)="updateVariantOnServer()"
            />
            <span class="input-group-text">mm</span>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="weakLayerPersistentCheckbox">{{
            "dangerSources.create.label.weakLayerPersistent" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().weakLayerPersistent !== undefined && variant().weakLayerPersistent === true
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setWeakLayerPersistent(true)"
            >
              <span>{{ "button.yes" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().weakLayerPersistent !== undefined && variant().weakLayerPersistent === false
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setWeakLayerPersistent(false)"
            >
              <span>{{ "button.no" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.weakLayerThickness" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerThickness(thicknessEnum.thin) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerThickness($event, isWeakLayerThickness(thicknessEnum.thin) ? undefined : thicknessEnum.thin)
              "
              data-toggle="tooltip"
              title="{{ 'thickness.thin' | translate }}"
            >
              <span>{{ "thickness.thin" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerThickness(thicknessEnum.thick) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerThickness(
                  $event,
                  isWeakLayerThickness(thicknessEnum.thick) ? undefined : thicknessEnum.thick
                )
              "
              data-toggle="tooltip"
              title="{{ 'thickness.thick' | translate }}"
            >
              <span>{{ "thickness.thick" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.weakLayerStrength" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerStrength(characteristicEnum.low) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerStrength(
                  $event,
                  isWeakLayerStrength(characteristicEnum.low) ? undefined : characteristicEnum.low
                )
              "
              data-toggle="tooltip"
              title="{{ 'characteristic.low' | translate }}"
            >
              <span>{{ "characteristic.low" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerStrength(characteristicEnum.medium) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerStrength(
                  $event,
                  isWeakLayerStrength(characteristicEnum.medium) ? undefined : characteristicEnum.medium
                )
              "
              data-toggle="tooltip"
              title="{{ 'characteristic.medium' | translate }}"
            >
              <span>{{ "characteristic.medium" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerStrength(characteristicEnum.high) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerStrength(
                  $event,
                  isWeakLayerStrength(characteristicEnum.high) ? undefined : characteristicEnum.high
                )
              "
              data-toggle="tooltip"
              title="{{ 'characteristic.high' | translate }}"
            >
              <span>{{ "characteristic.high" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerStrength(characteristicEnum.very_high) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerStrength(
                  $event,
                  isWeakLayerStrength(characteristicEnum.very_high) ? undefined : characteristicEnum.very_high
                )
              "
              data-toggle="tooltip"
              title="{{ 'characteristic.very_high' | translate }}"
            >
              <span>{{ "characteristic.very_high" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="weakLayerWetCheckbox">{{
            "dangerSources.create.label.weakLayerWet" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().weakLayerWet !== undefined && variant().weakLayerWet === true
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setWeakLayerWet(true)"
            >
              <span>{{ "button.yes" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().weakLayerWet !== undefined && variant().weakLayerWet === false
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setWeakLayerWet(false)"
            >
              <span>{{ "button.no" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="weakLayerCrustAboveCheckbox">{{
            "dangerSources.create.label.weakLayerCrustAbove" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerCrustAbove(weakLayerCrustEnum.yes) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerCrustAbove(
                  $event,
                  isWeakLayerCrustAbove(weakLayerCrustEnum.yes) ? undefined : weakLayerCrustEnum.yes
                )
              "
              data-toggle="tooltip"
              title="{{ 'weakLayerCrust.yes' | translate }}"
            >
              <span>{{ "weakLayerCrust.yes" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerCrustAbove(weakLayerCrustEnum.partly) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerCrustAbove(
                  $event,
                  isWeakLayerCrustAbove(weakLayerCrustEnum.partly) ? undefined : weakLayerCrustEnum.partly
                )
              "
              data-toggle="tooltip"
              title="{{ 'weakLayerCrust.partly' | translate }}"
            >
              <span>{{ "weakLayerCrust.partly" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerCrustAbove(weakLayerCrustEnum.no) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerCrustAbove(
                  $event,
                  isWeakLayerCrustAbove(weakLayerCrustEnum.no) ? undefined : weakLayerCrustEnum.no
                )
              "
              data-toggle="tooltip"
              title="{{ 'weakLayerCrust.no' | translate }}"
            >
              <span>{{ "weakLayerCrust.no" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="weakLayerCrustBelowCheckbox">{{
            "dangerSources.create.label.weakLayerCrustBelow" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerCrustBelow(weakLayerCrustEnum.yes) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerCrustBelow(
                  $event,
                  isWeakLayerCrustBelow(weakLayerCrustEnum.yes) ? undefined : weakLayerCrustEnum.yes
                )
              "
              data-toggle="tooltip"
              title="{{ 'weakLayerCrust.yes' | translate }}"
            >
              <span>{{ "weakLayerCrust.yes" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerCrustBelow(weakLayerCrustEnum.partly) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerCrustBelow(
                  $event,
                  isWeakLayerCrustBelow(weakLayerCrustEnum.partly) ? undefined : weakLayerCrustEnum.partly
                )
              "
              data-toggle="tooltip"
              title="{{ 'weakLayerCrust.partly' | translate }}"
            >
              <span>{{ "weakLayerCrust.partly" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerCrustBelow(weakLayerCrustEnum.no) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerCrustBelow(
                  $event,
                  isWeakLayerCrustBelow(weakLayerCrustEnum.no) ? undefined : weakLayerCrustEnum.no
                )
              "
              data-toggle="tooltip"
              title="{{ 'weakLayerCrust.no' | translate }}"
            >
              <span>{{ "weakLayerCrust.no" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.weakLayerPosition" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerPosition(snowpackPositionEnum.ground) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerPosition(
                  $event,
                  isWeakLayerPosition(snowpackPositionEnum.ground) ? undefined : snowpackPositionEnum.ground
                )
              "
              data-toggle="tooltip"
              title="{{ 'snowpackPosition.ground' | translate }}"
            >
              <span>{{ "snowpackPosition.ground" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerPosition(snowpackPositionEnum.lower) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerPosition(
                  $event,
                  isWeakLayerPosition(snowpackPositionEnum.lower) ? undefined : snowpackPositionEnum.lower
                )
              "
              data-toggle="tooltip"
              title="{{ 'snowpackPosition.lower' | translate }}"
            >
              <span>{{ "snowpackPosition.lower" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerPosition(snowpackPositionEnum.middle) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerPosition(
                  $event,
                  isWeakLayerPosition(snowpackPositionEnum.middle) ? undefined : snowpackPositionEnum.middle
                )
              "
              data-toggle="tooltip"
              title="{{ 'snowpackPosition.middle' | translate }}"
            >
              <span>{{ "snowpackPosition.middle" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerPosition(snowpackPositionEnum.upper) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerPosition(
                  $event,
                  isWeakLayerPosition(snowpackPositionEnum.upper) ? undefined : snowpackPositionEnum.upper
                )
              "
              data-toggle="tooltip"
              title="{{ 'snowpackPosition.upper' | translate }}"
            >
              <span>{{ "snowpackPosition.upper" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.weakLayerCreation" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isWeakLayerCreation(creationProcessEnum.radiation_recrystallization)
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="
                setWeakLayerCreation(
                  $event,
                  isWeakLayerCreation(creationProcessEnum.radiation_recrystallization)
                    ? undefined
                    : creationProcessEnum.radiation_recrystallization
                )
              "
              data-toggle="tooltip"
              title="{{ 'creationProcess.radiation_recrystallization' | translate }}"
            >
              <span>{{ "creationProcess.radiation_recrystallization" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isWeakLayerCreation(creationProcessEnum.diurnal_recrystallization)
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="
                setWeakLayerCreation(
                  $event,
                  isWeakLayerCreation(creationProcessEnum.diurnal_recrystallization)
                    ? undefined
                    : creationProcessEnum.diurnal_recrystallization
                )
              "
              data-toggle="tooltip"
              title="{{ 'creationProcess.diurnal_recrystallization' | translate }}"
            >
              <span>{{ "creationProcess.diurnal_recrystallization" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isWeakLayerCreation(creationProcessEnum.melt_layer_recrystallization)
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="
                setWeakLayerCreation(
                  $event,
                  isWeakLayerCreation(creationProcessEnum.melt_layer_recrystallization)
                    ? undefined
                    : creationProcessEnum.melt_layer_recrystallization
                )
              "
              data-toggle="tooltip"
              title="{{ 'creationProcess.melt_layer_recrystallization' | translate }}"
            >
              <span>{{ "creationProcess.melt_layer_recrystallization" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isWeakLayerCreation(creationProcessEnum.surface_hoar_formation)
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="
                setWeakLayerCreation(
                  $event,
                  isWeakLayerCreation(creationProcessEnum.surface_hoar_formation)
                    ? undefined
                    : creationProcessEnum.surface_hoar_formation
                )
              "
              data-toggle="tooltip"
              title="{{ 'creationProcess.surface_hoar_formation' | translate }}"
            >
              <span>{{ "creationProcess.surface_hoar_formation" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.weakLayerDistribution" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerDistribution(distributionEnum.isolated) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerDistribution(
                  $event,
                  isWeakLayerDistribution(distributionEnum.isolated) ? undefined : distributionEnum.isolated
                )
              "
              data-toggle="tooltip"
              title="{{ 'distribution.isolated' | translate }}"
            >
              <span>{{ "distribution.isolated" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isWeakLayerDistribution(distributionEnum.specific) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setWeakLayerDistribution(
                  $event,
                  isWeakLayerDistribution(distributionEnum.specific) ? undefined : distributionEnum.specific
                )
              "
              data-toggle="tooltip"
              title="{{ 'distribution.specific' | translate }}"
            >
              <span>{{ "distribution.specific" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isWeakLayerDistribution(distributionEnum.widespread) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="
                setWeakLayerDistribution(
                  $event,
                  isWeakLayerDistribution(distributionEnum.widespread) ? undefined : distributionEnum.widespread
                )
              "
              data-toggle="tooltip"
              title="{{ 'distribution.widespread' | translate }}"
            >
              <span>{{ "distribution.widespread" | translate }}</span>
            </button>
          </div>
        </div>

        <hr *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="rounded" />

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.dangerSpotRecognizability" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isDangerSpotRecognizability(recognizabilityEnum.very_easy) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="
                setDangerSpotRecognizability(
                  $event,
                  isDangerSpotRecognizability(recognizabilityEnum.very_easy) ? undefined : recognizabilityEnum.very_easy
                )
              "
              data-toggle="tooltip"
              title="{{ 'recognizability.very_easy' | translate }}"
            >
              <span>{{ "recognizability.very_easy" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isDangerSpotRecognizability(recognizabilityEnum.easy) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="
                setDangerSpotRecognizability(
                  $event,
                  isDangerSpotRecognizability(recognizabilityEnum.easy) ? undefined : recognizabilityEnum.easy
                )
              "
              data-toggle="tooltip"
              title="{{ 'recognizability.easy' | translate }}"
            >
              <span>{{ "recognizability.easy" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isDangerSpotRecognizability(recognizabilityEnum.hard) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="
                setDangerSpotRecognizability(
                  $event,
                  isDangerSpotRecognizability(recognizabilityEnum.hard) ? undefined : recognizabilityEnum.hard
                )
              "
              data-toggle="tooltip"
              title="{{ 'recognizability.hard' | translate }}"
            >
              <span>{{ "recognizability.hard" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isDangerSpotRecognizability(recognizabilityEnum.very_hard) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="
                setDangerSpotRecognizability(
                  $event,
                  isDangerSpotRecognizability(recognizabilityEnum.very_hard) ? undefined : recognizabilityEnum.very_hard
                )
              "
              data-toggle="tooltip"
              title="{{ 'recognizability.very_hard' | translate }}"
            >
              <span>{{ "recognizability.very_hard" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="remoteTriggeringCheckbox">{{
            "dangerSources.create.label.remoteTriggering" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().remoteTriggering !== undefined && variant().remoteTriggering === true
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setRemoteTriggering(true)"
            >
              <span>{{ "button.yes" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().remoteTriggering !== undefined && variant().remoteTriggering === false
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setRemoteTriggering(false)"
            >
              <span>{{ "button.no" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.slab)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.terrainTypes" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isTerrainType(terrainTypeEnum.gullies) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setTerrainType($event, terrainTypeEnum.gullies)"
              data-toggle="tooltip"
              title="{{ 'terrainType.gullies' | translate }}"
            >
              <span>{{ "terrainType.gullies" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isTerrainType(terrainTypeEnum.bowls) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setTerrainType($event, terrainTypeEnum.bowls)"
              data-toggle="tooltip"
              title="{{ 'terrainType.bowls' | translate }}"
            >
              <span>{{ "terrainType.bowls" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isTerrainType(terrainTypeEnum.pass_areas) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setTerrainType($event, terrainTypeEnum.pass_areas)"
              data-toggle="tooltip"
              title="{{ 'terrainType.pass_areas' | translate }}"
            >
              <span>{{ "terrainType.pass_areas" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isTerrainType(terrainTypeEnum.ridge_lines) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setTerrainType($event, terrainTypeEnum.ridge_lines)"
              data-toggle="tooltip"
              title="{{ 'terrainType.ridge_lines' | translate }}"
            >
              <span>{{ "terrainType.ridge_lines" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isTerrainType(terrainTypeEnum.adjacent_to_ridge_lines) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="setTerrainType($event, terrainTypeEnum.adjacent_to_ridge_lines)"
              data-toggle="tooltip"
              title="{{ 'terrainType.adjacent_to_ridge_lines' | translate }}"
            >
              <span>{{ "terrainType.adjacent_to_ridge_lines" | translate }}</span>
            </button>
          </div>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isTerrainType(terrainTypeEnum.distant_from_ridge_lines) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="setTerrainType($event, terrainTypeEnum.distant_from_ridge_lines)"
              data-toggle="tooltip"
              title="{{ 'terrainType.distant_from_ridge_lines' | translate }}"
            >
              <span>{{ "terrainType.distant_from_ridge_lines" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isTerrainType(terrainTypeEnum.slope_discontinuities) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="setTerrainType($event, terrainTypeEnum.slope_discontinuities)"
              data-toggle="tooltip"
              title="{{ 'terrainType.slope_discontinuities' | translate }}"
            >
              <span>{{ "terrainType.slope_discontinuities" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isTerrainType(terrainTypeEnum.convex_terrain) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setTerrainType($event, terrainTypeEnum.convex_terrain)"
              data-toggle="tooltip"
              title="{{ 'terrainType.convex_terrain' | translate }}"
            >
              <span>{{ "terrainType.convex_terrain" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isTerrainType(terrainTypeEnum.concave_terrain) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setTerrainType($event, terrainTypeEnum.concave_terrain)"
              data-toggle="tooltip"
              title="{{ 'terrainType.concave_terrain' | translate }}"
            >
              <span>{{ "terrainType.concave_terrain" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isTerrainType(terrainTypeEnum.steep_terrain) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setTerrainType($event, terrainTypeEnum.steep_terrain)"
              data-toggle="tooltip"
              title="{{ 'terrainType.steep_terrain' | translate }}"
            >
              <span>{{ "terrainType.steep_terrain" | translate }}</span>
            </button>
          </div>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isTerrainType(terrainTypeEnum.very_steep_terrain) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setTerrainType($event, terrainTypeEnum.very_steep_terrain)"
              data-toggle="tooltip"
              title="{{ 'terrainType.very_steep_terrain' | translate }}"
            >
              <span>{{ "terrainType.very_steep_terrain" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isTerrainType(terrainTypeEnum.open_terrain) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setTerrainType($event, terrainTypeEnum.open_terrain)"
              data-toggle="tooltip"
              title="{{ 'terrainType.open_terrain' | translate }}"
            >
              <span>{{ "terrainType.open_terrain" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isTerrainType(terrainTypeEnum.forest) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setTerrainType($event, terrainTypeEnum.forest)"
              data-toggle="tooltip"
              title="{{ 'terrainType.forest' | translate }}"
            >
              <span>{{ "terrainType.forest" | translate }}</span>
            </button>
          </div>
        </div>

        <!-- LOOSE SNOW AVALANCHES -->
        <div *ngIf="isAvalancheType(avalancheTypeEnum.loose)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.looseSnowGrainShape" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isLooseSnowGrainShape(grainShapeEnum.PP) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setLooseSnowGrainShape($event, isLooseSnowGrainShape(grainShapeEnum.PP) ? undefined : grainShapeEnum.PP)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.PP.class')"
            >
              <span>{{ "grainShape.PP.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isLooseSnowGrainShape(grainShapeEnum.DF) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setLooseSnowGrainShape($event, isLooseSnowGrainShape(grainShapeEnum.DF) ? undefined : grainShapeEnum.DF)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.DF.class')"
            >
              <span>{{ "grainShape.DF.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isLooseSnowGrainShape(grainShapeEnum.FC) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setLooseSnowGrainShape($event, isLooseSnowGrainShape(grainShapeEnum.FC) ? undefined : grainShapeEnum.FC)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.FC.class')"
            >
              <span>{{ "grainShape.FC.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isLooseSnowGrainShape(grainShapeEnum.DH) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setLooseSnowGrainShape($event, isLooseSnowGrainShape(grainShapeEnum.DH) ? undefined : grainShapeEnum.DH)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.DH.class')"
            >
              <span>{{ "grainShape.DH.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isLooseSnowGrainShape(grainShapeEnum.SH) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setLooseSnowGrainShape($event, isLooseSnowGrainShape(grainShapeEnum.SH) ? undefined : grainShapeEnum.SH)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.SH.class')"
            >
              <span>{{ "grainShape.SH.code" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isLooseSnowGrainShape(grainShapeEnum.MF) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setLooseSnowGrainShape($event, isLooseSnowGrainShape(grainShapeEnum.MF) ? undefined : grainShapeEnum.MF)
              "
              data-toggle="tooltip"
              [title]="translateService.instant('grainShape.MF.class')"
            >
              <span>{{ "grainShape.MF.code" | translate }}</span>
            </button>
          </div>
        </div>

        <div *ngIf="isAvalancheType(avalancheTypeEnum.loose)" class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.looseSnowMoisture" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isLooseSnowMoisture(wetnessEnum.dry) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setLooseSnowMoisture($event, isLooseSnowMoisture(wetnessEnum.dry) ? undefined : wetnessEnum.dry)"
              data-toggle="tooltip"
              title="{{ 'wetness.dry' | translate }}"
            >
              <span>{{ "wetness.dry" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isLooseSnowMoisture(wetnessEnum.moist) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setLooseSnowMoisture($event, isLooseSnowMoisture(wetnessEnum.moist) ? undefined : wetnessEnum.moist)
              "
              data-toggle="tooltip"
              title="{{ 'wetness.moist' | translate }}"
            >
              <span>{{ "wetness.moist" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isLooseSnowMoisture(wetnessEnum.wet) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setLooseSnowMoisture($event, isLooseSnowMoisture(wetnessEnum.wet) ? undefined : wetnessEnum.wet)"
              data-toggle="tooltip"
              title="{{ 'wetness.wet' | translate }}"
            >
              <span>{{ "wetness.wet" | translate }}</span>
            </button>
          </div>
        </div>
      </accordion-group>

      <accordion-group
        class="accordion-group"
        [isOpen]="isAccordionCharacteristicsOpen"
        (isOpenChange)="accordionChanged($event, 'characteristics')"
      >
        <div accordion-heading class="accordion-header accordion-header--with-buttons">
          <h2 class="accordion-header__title">
            <i *ngIf="!isAccordionCharacteristicsOpen" class="accordion__arrow ph ph-caret-right"></i>
            <i *ngIf="isAccordionCharacteristicsOpen" class="accordion__arrow ph ph-caret-down"></i>
            {{ "dangerSources.create.title.characteristics" | translate }}
          </h2>
        </div>

        <div class="form-group row">
          <label class="form-label" for="hasDaytimeDependencyCheckbox">{{
            "dangerSources.create.label.hasDaytimeDependency" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().hasDaytimeDependency !== undefined && variant().hasDaytimeDependency === true
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setHasDaytimeDependency(true)"
            >
              <span>{{ "button.yes" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().hasDaytimeDependency !== undefined && variant().hasDaytimeDependency === false
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setHasDaytimeDependency(false)"
            >
              <span>{{ "button.no" | translate }}</span>
            </button>
          </div>
        </div>

        <div class="form-group row">
          <label class="form-label" for="dangerIncreaseWithElevationCheckbox">{{
            "dangerSources.create.label.dangerIncreaseWithElevation" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().dangerIncreaseWithElevation !== undefined && variant().dangerIncreaseWithElevation === true
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setDangerIncreaseWithElevation(true)"
            >
              <span>{{ "button.yes" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().dangerIncreaseWithElevation !== undefined && variant().dangerIncreaseWithElevation === false
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setDangerIncreaseWithElevation(false)"
            >
              <span>{{ "button.no" | translate }}</span>
            </button>
          </div>
        </div>

        <div class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.highestDangerAspect" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isHighestDangerAspect(aspectEnum.N) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setHighestDangerAspect($event, isHighestDangerAspect(aspectEnum.N) ? undefined : aspectEnum.N)"
              data-toggle="tooltip"
              title="{{ 'aspect.N' | translate }}"
            >
              <span>{{ "aspect.N" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isHighestDangerAspect(aspectEnum.E) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setHighestDangerAspect($event, isHighestDangerAspect(aspectEnum.E) ? undefined : aspectEnum.E)"
              data-toggle="tooltip"
              title="{{ 'aspect.E' | translate }}"
            >
              <span>{{ "aspect.E" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isHighestDangerAspect(aspectEnum.S) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setHighestDangerAspect($event, isHighestDangerAspect(aspectEnum.S) ? undefined : aspectEnum.S)"
              data-toggle="tooltip"
              title="{{ 'aspect.S' | translate }}"
            >
              <span>{{ "aspect.S" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isHighestDangerAspect(aspectEnum.W) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setHighestDangerAspect($event, isHighestDangerAspect(aspectEnum.W) ? undefined : aspectEnum.W)"
              data-toggle="tooltip"
              title="{{ 'aspect.W' | translate }}"
            >
              <span>{{ "aspect.W" | translate }}</span>
            </button>
          </div>
        </div>

        <div class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.dangerPeak" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isDangerPeak(daytimeEnum.evening) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setDangerPeak($event, isDangerPeak(daytimeEnum.evening) ? undefined : daytimeEnum.evening)"
              data-toggle="tooltip"
              title="{{ 'detailedDaytime.evening' | translate }}"
            >
              <span>{{ "detailedDaytime.evening" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isDangerPeak(daytimeEnum.first_night_half) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setDangerPeak(
                  $event,
                  isDangerPeak(daytimeEnum.first_night_half) ? undefined : daytimeEnum.first_night_half
                )
              "
              data-toggle="tooltip"
              title="{{ 'detailedDaytime.first_night_half' | translate }}"
            >
              <span>{{ "detailedDaytime.first_night_half" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isDangerPeak(daytimeEnum.second_night_half) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setDangerPeak(
                  $event,
                  isDangerPeak(daytimeEnum.second_night_half) ? undefined : daytimeEnum.second_night_half
                )
              "
              data-toggle="tooltip"
              title="{{ 'detailedDaytime.second_night_half' | translate }}"
            >
              <span>{{ "detailedDaytime.second_night_half" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isDangerPeak(daytimeEnum.morning) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setDangerPeak($event, isDangerPeak(daytimeEnum.morning) ? undefined : daytimeEnum.morning)"
              data-toggle="tooltip"
              title="{{ 'detailedDaytime.morning' | translate }}"
            >
              <span>{{ "detailedDaytime.morning" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isDangerPeak(daytimeEnum.forenoon) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setDangerPeak($event, isDangerPeak(daytimeEnum.forenoon) ? undefined : daytimeEnum.forenoon)"
              data-toggle="tooltip"
              title="{{ 'detailedDaytime.forenoon' | translate }}"
            >
              <span>{{ "detailedDaytime.forenoon" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isDangerPeak(daytimeEnum.afternoon) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setDangerPeak($event, isDangerPeak(daytimeEnum.afternoon) ? undefined : daytimeEnum.afternoon)"
              data-toggle="tooltip"
              title="{{ 'detailedDaytime.afternoon' | translate }}"
            >
              <span>{{ "detailedDaytime.afternoon" | translate }}</span>
            </button>
          </div>
        </div>

        <div class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.slopeGradient" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                isSlopeGradient(slopeGradientEnum.moderately_steep) ? 'btn-secondary' : 'btn-outline-secondary'
              "
              (click)="
                setSlopeGradient(
                  $event,
                  isSlopeGradient(slopeGradientEnum.moderately_steep) ? undefined : slopeGradientEnum.moderately_steep
                )
              "
              data-toggle="tooltip"
              title="{{ 'slopeGradient.moderately_steep' | translate }}"
            >
              <span>{{ "slopeGradient.moderately_steep" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlopeGradient(slopeGradientEnum.steep) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setSlopeGradient($event, isSlopeGradient(slopeGradientEnum.steep) ? undefined : slopeGradientEnum.steep)
              "
              data-toggle="tooltip"
              title="{{ 'slopeGradient.steep' | translate }}"
            >
              <span>{{ "slopeGradient.steep" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlopeGradient(slopeGradientEnum.very_steep) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setSlopeGradient(
                  $event,
                  isSlopeGradient(slopeGradientEnum.very_steep) ? undefined : slopeGradientEnum.very_steep
                )
              "
              data-toggle="tooltip"
              title="{{ 'slopeGradient.very_steep' | translate }}"
            >
              <span>{{ "slopeGradient.very_steep" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isSlopeGradient(slopeGradientEnum.extremely_steep) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setSlopeGradient(
                  $event,
                  isSlopeGradient(slopeGradientEnum.extremely_steep) ? undefined : slopeGradientEnum.extremely_steep
                )
              "
              data-toggle="tooltip"
              title="{{ 'slopeGradient.extremely_steep' | translate }}"
            >
              <span>{{ "slopeGradient.extremely_steep" | translate }}</span>
            </button>
          </div>
        </div>

        <div class="form-group row">
          <label class="form-label" for="runoutIntoGreenCheckbox">{{
            "dangerSources.create.label.runoutIntoGreen" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().runoutIntoGreen !== undefined && variant().runoutIntoGreen === true
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setRunoutIntoGreen(true)"
            >
              <span>{{ "button.yes" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="
                variant().runoutIntoGreen !== undefined && variant().runoutIntoGreen === false
                  ? 'btn-secondary'
                  : 'btn-outline-secondary'
              "
              (click)="setRunoutIntoGreen(false)"
            >
              <span>{{ "button.no" | translate }}</span>
            </button>
          </div>
        </div>

        <div class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.naturalRelease" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isNaturalRelease(probabilityEnum.likely) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setNaturalRelease($event, isNaturalRelease(probabilityEnum.likely) ? undefined : probabilityEnum.likely)
              "
              data-toggle="tooltip"
              title="{{ 'probability.likely' | translate }}"
            >
              <span>{{ "probability.likely" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isNaturalRelease(probabilityEnum.possible) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setNaturalRelease(
                  $event,
                  isNaturalRelease(probabilityEnum.possible) ? undefined : probabilityEnum.possible
                )
              "
              data-toggle="tooltip"
              title="{{ 'probability.possible' | translate }}"
            >
              <span>{{ "probability.possible" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isNaturalRelease(probabilityEnum.unlikely) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="
                setNaturalRelease(
                  $event,
                  isNaturalRelease(probabilityEnum.unlikely) ? undefined : probabilityEnum.unlikely
                )
              "
              data-toggle="tooltip"
              title="{{ 'probability.unlikely' | translate }}"
            >
              <span>{{ "probability.unlikely" | translate }}</span>
            </button>
          </div>
        </div>

        <div class="form-group row">
          <label class="form-label" for="textarea-input">{{
            "dangerSources.create.label.dangerSigns" | translate
          }}</label>
          <div class="btn-group">
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isDangerSign(dangerSignEnum.shooting_cracks) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setDangerSign($event, dangerSignEnum.shooting_cracks)"
              data-toggle="tooltip"
              title="{{ 'dangerSign.shooting_cracks' | translate }}"
            >
              <span>{{ "dangerSign.shooting_cracks" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isDangerSign(dangerSignEnum.whumpfing) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setDangerSign($event, dangerSignEnum.whumpfing)"
              data-toggle="tooltip"
              title="{{ 'dangerSign.whumpfing' | translate }}"
            >
              <span>{{ "dangerSign.whumpfing" | translate }}</span>
            </button>
            <button
              type="reset"
              class="btn btn-sm"
              [disabled]="disabled()"
              [ngClass]="isDangerSign(dangerSignEnum.fresh_avalanches) ? 'btn-secondary' : 'btn-outline-secondary'"
              (click)="setDangerSign($event, dangerSignEnum.fresh_avalanches)"
              data-toggle="tooltip"
              title="{{ 'dangerSign.fresh_avalanches' | translate }}"
            >
              <span>{{ "dangerSign.fresh_avalanches" | translate }}</span>
            </button>
          </div>
        </div>
      </accordion-group>

      <accordion-group
        class="accordion-group"
        [isOpen]="isAccordionMatrixOpen"
        (isOpenChange)="accordionChanged($event, 'matrix')"
      >
        <div accordion-heading class="accordion-header accordion-header--with-buttons">
          <h2 class="accordion-header__title">
            <i *ngIf="!isAccordionMatrixOpen" class="accordion__arrow ph ph-caret-right"></i>
            <i *ngIf="isAccordionMatrixOpen" class="accordion__arrow ph ph-caret-down"></i>
            {{ "dangerSources.create.title.matrix" | translate }}
          </h2>
        </div>
        <div class="form-group row">
          <div class="col-md-5">
            <label class="form-label" for="">{{ "dangerSources.create.label.aspects" | translate }}</label>
            <div>
              <app-aspects
                [(aspects)]="variant().aspects"
                [disabled]="disabled()"
                [size]="150"
                (aspectsChange)="updateVariantOnServer()"
              ></app-aspects>
            </div>
          </div>
          <div class="col-md-7">
            <label class="form-label" for="">{{ "elevation.title" | translate }}</label>
            <!-- Elevation (high) -->
            <div class="avalanche-problem-detail__elevation">
              <div class="avalanche-problem-detail__elevation-label form-check">
                <input
                  id="elevationHighCheckbox"
                  type="checkbox"
                  class="form-check-input"
                  [disabled]="disabled()"
                  (change)="setUseElevationHigh($event)"
                  [(ngModel)]="useElevationHigh"
                />
                <label class="form-label" for="elevationHighCheckbox">{{ "elevation.high" | translate }}</label>
              </div>
              <div class="avalanche-problem-detail__elevation-inputs">
                <div class="input-group">
                  <input
                    step="100"
                    min="0"
                    max="9000"
                    id="inputElevationHigh"
                    class="form-control"
                    size="14"
                    type="number"
                    name="elevation-input"
                    [disabled]="disabled() || variant().treelineHigh || !useElevationHigh"
                    [(ngModel)]="localElevationHigh"
                    (change)="updateElevationHigh($event)"
                  />
                  <span class="input-group-text">m</span>
                </div>
                <button
                  [disabled]="disabled() || !useElevationHigh"
                  type="reset"
                  class="btn btn-icon"
                  [ngClass]="localTreelineHigh ? 'btn-secondary' : 'btn-outline-secondary'"
                  (click)="treelineHighClicked($event)"
                  data-toggle="tooltip"
                  title="{{ 'elevation.treeline' | translate }}"
                >
                  <i class="ph ph-tree-evergreen"></i>
                </button>
              </div>
            </div>

            <!-- Elevation (low) -->
            <div class="avalanche-problem-detail__elevation">
              <div class="form-check avalanche-problem-detail__elevation-label">
                <input
                  id="elevationLowCheckbox"
                  type="checkbox"
                  class="form-check-input"
                  [disabled]="disabled()"
                  (change)="setUseElevationLow($event)"
                  [(ngModel)]="useElevationLow"
                />
                <label class="form-label" for="elevationLowCheckbox">{{ "elevation.low" | translate }}</label>
              </div>
              <div class="avalanche-problem-detail__elevation-inputs">
                <div class="input-group">
                  <input
                    step="100"
                    min="0"
                    max="9000"
                    id="inputElevationLow"
                    class="form-control"
                    size="14"
                    type="number"
                    name="elevation-input"
                    [disabled]="disabled() || variant().treelineLow || !useElevationLow"
                    [(ngModel)]="localElevationLow"
                    (change)="updateElevationLow()"
                  />
                  <span class="input-group-text">m</span>
                </div>
                <button
                  [disabled]="disabled() || !useElevationLow"
                  type="reset"
                  class="btn btn-icon"
                  [ngClass]="localTreelineLow ? 'btn-secondary' : 'btn-outline-secondary'"
                  (click)="treelineLowClicked($event)"
                  data-toggle="tooltip"
                  title="{{ 'elevation.treeline' | translate }}"
                >
                  <i class="ph ph-tree-evergreen"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="form-group">
          <app-matrix-parameter
            [bulletinDaytimeDescription]="variant()"
            [matrixInformation]="variant().eawsMatrixInformation"
            [disabled]="disabled()"
            [count]="1"
            [afternoon]="false"
            (changeMatrixEvent)="updateVariantOnServer()"
          ></app-matrix-parameter>
        </div>
      </accordion-group>
      <accordion-group
        class="accordion-group"
        [isOpen]="isAccordionCommentOpen"
        (isOpenChange)="accordionChanged($event, 'comment')"
      >
        <div accordion-heading class="accordion-header accordion-header--with-buttons">
          <h2 class="accordion-header__title">
            <i *ngIf="!isAccordionMatrixOpen" class="accordion__arrow ph ph-caret-right"></i>
            <i *ngIf="isAccordionMatrixOpen" class="accordion__arrow ph ph-caret-down"></i>
            {{ "dangerSources.create.title.comment" | translate }}
          </h2>
        </div>
        <div class="form-group row">
          <textarea
            id="textarea-input"
            class="form-control"
            rows="4"
            [disabled]="disabled()"
            [(ngModel)]="variant().comment"
            (change)="updateVariantOnServer()"
          ></textarea>
        </div>
      </accordion-group>
    </accordion>
  </main>
</div>
